(self["webpackChunkrepeatdata"]=self["webpackChunkrepeatdata"]||[]).push([[383],{13327:function(e,t,a){"use strict";a.r(t);var r=a(87537),o=a.n(r),n=a(23645),l=a.n(n),i=l()(o());i.push([e.id,".edit_task[data-v-a2564120]{width:600px}.edit_task .body[data-v-a2564120]{margin-top:20px}.edit_task .body[data-v-a2564120] .el-input .el-input__inner{height:35px;line-height:35px}.edit_task .body[data-v-a2564120] .el-input .el-input__prefix,.edit_task .body[data-v-a2564120] .el-input .el-input__suffix{top:3px}","",{version:3,sources:["webpack://./src/view/engineering/modal/addProject.vue"],names:[],mappings:"AAcA,4BACE,WAXF,CAUA,kCAGI,eAVJ,CAOA,6DAMQ,WAAA,CACA,gBAVR,CAGA,4HAWQ,OAVR",sourcesContent:['// 字体\n@fontFamily: "PingFangSC-Regular", "PingFang SC", "Microsoft YaHei",\n  "Microsoft YaHei UI", "WenQuanYi Micro Hei", "Helvetica Neue", "Helvetica",\n  "Arial", "Hiragino Sans GB", "Hiragino Sans GB W3", "sans-serif";\n\n/*============主体样式定义 start============*/\n@themeColor: #2e86de;\n//预警分类颜色：红橙黄蓝\n@redColor: #d54341; //红色\n@orangeColor: #f6970b; //橙色\n@yellowColor: #eec81c; //黄色\n@blueColor: #1c75e3; //蓝色\n/*============主体样式定义 end============*/\n\n.edit_task {\n  width: 600px;\n  .body {\n    margin-top: 20px;\n    :deep(.el-input) {\n      .el-input__inner {\n        height: 35px;\n        line-height: 35px;\n      }\n      .el-input__prefix,\n      .el-input__suffix {\n        top: 3px;\n      }\n    }\n  }\n}\n'],sourceRoot:""}]),t["default"]=i},84383:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var r=a(66252);const o=e=>((0,r.dD)("data-v-a2564120"),e=e(),(0,r.Cn)(),e),n={class:"edit_task"},l={class:"header"},i={class:"header_inner"},d=o((()=>(0,r._)("span",null,"添加项目",-1))),p={class:"body"},c={class:"footer"};function s(e,t,a,o,s,u){const m=(0,r.up)("el-input"),j=(0,r.up)("el-form-item"),g=(0,r.up)("el-form"),f=(0,r.up)("loaders");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",l,[(0,r._)("div",i,[d,(0,r._)("span",{onClick:t[0]||(t[0]=t=>e.modalCancel())})])]),(0,r._)("div",p,[(0,r.Wm)(g,{model:e.projectObj,ref:"taskInfoForm",rules:e.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{label:"项目名称","label-width":"80px",prop:"projectName"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"text",placeholder:"请填写项目名称",modelValue:e.projectObj.projectName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.projectObj.projectName=t)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(j,{label:"项目描述","label-width":"80px",prop:"projectDescription"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"textarea",placeholder:"请填写项目描述",rows:3,resize:"none",modelValue:e.projectObj.projectDescription,"onUpdate:modelValue":t[2]||(t[2]=t=>e.projectObj.projectDescription=t),maxlength:200,"show-word-limit":!0},null,8,["modelValue"])])),_:1}),(0,r.Wm)(j,{label:"根目录","label-width":"80px",prop:"rootPath"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"text",placeholder:"请填写根目录",modelValue:e.projectObj.rootPath,"onUpdate:modelValue":t[3]||(t[3]=t=>e.projectObj.rootPath=t)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(j,{label:"源地址","label-width":"80px",prop:"targetUrl"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"text",placeholder:"请填写源地址",modelValue:e.projectObj.targetUrl,"onUpdate:modelValue":t[4]||(t[4]=t=>e.projectObj.targetUrl=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])]),(0,r._)("div",c,[(0,r._)("button",{class:"btn confirm",onClick:t[5]||(t[5]=t=>e.confirm())},"确定"),(0,r._)("button",{class:"btn cancel",onClick:t[6]||(t[6]=t=>e.modalCancel())},"取消")]),(0,r.Wm)(f,{loader:e.loader,smallRange:!0},null,8,["loader"])])}a(21703);var u=a(2262),m=a(35549),j=a(27484),g=a.n(j),f=(0,r.aZ)({name:"editTask",props:{modalCancel:{type:Function,default:()=>{}},modalConfirm:{type:Function,default:()=>{}},id:{type:[Number,String],required:!0}},setup(e,{emit:t}){const{get:a,post:o}=(0,m.Z)(),{proxy:n}=(0,r.FN)();let l=(0,u.reactive)({taskInfoForm:null,loader:"",projectObj:{rootPath:"",projectName:"",projectDescription:"",isEnabled:"true",targetUrl:""}}),i=(0,u.reactive)({projectName:[{required:!0,message:"项目名称不能为空！",trigger:"change"}],projectDescription:[{required:!0,message:"描述不能为空！",trigger:["change","blur"]}],rootPath:[{required:!0,message:"根目录不能为空！",trigger:["change","blur"]}],targetUrl:[{validator:(e,t,a)=>{if(!t)return void a(new Error("源地址不能为空！"));var r=/^(http:|ftp:|https:)?(\/\/)?[a-z-A-z\d]*(\.)?[a-z-A-z\d]+(\.)?[a-z-A-z\d]+(\.(?:[a-z-A-z\d]+))+(\:(?:\d+))?(\/?|(\/.+)?)$/,o=/^(http:|ftp:|https:)?(\/\/)?(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])(\:?(:\d+))?(\/?|(\/.+)?)$/;let n=r.test(t)||o.test(t);n?a():a(new Error("请输入合法地址"))},required:!0}]});const d=()=>{l.taskInfoForm.validate((async t=>{t&&(e.id?p():c())}))},p=async()=>{let t={id:e.id,...l.projectObj},{message:a,code:r}=await(l.loader=o(`${repeatData}/editProject`,t));n.$msg({type:String(r),content:a}),e.modalConfirm()},c=async()=>{let t={id:Math.round(1e8*Math.random()),isEnabled:"true",projectShow:"true",...l.projectObj,createdDate:g()(new Date).format("YYYY-MM-DD")},{message:a,code:r}=await(l.loader=o(`${repeatData}/addProject`,t));n.$msg({type:String(r),content:a}),e.modalConfirm()},s=async()=>{const t={id:e.id};let a=await(l.loader=o(`${repeatData}/projectInfo`,t));l.projectObj.rootPath=a.data.rootPath,l.projectObj.projectName=a.data.projectName,l.projectObj.projectDescription=a.data.projectDescription,l.projectObj.targetUrl=a.data.targetUrl};return(0,r.bv)((()=>{e.id&&s()})),{...(0,u.toRefs)(l),rules:i,getinfo:s,edit:p,save:c,confirm:d}}}),b=(a(1751),a(83744));const h=(0,b.Z)(f,[["render",s],["__scopeId","data-v-a2564120"]]);var _=h},1751:function(e,t,a){var r=a(13327);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(54402).Z;o("20e99795",r,!0,{sourceMap:!0,shadowMode:!1})}}]);